{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst GALLERY_LINK = 'gallery-link';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(q) {\n    const searchParams = new URLSearchParams({\n        key: '42361434-dd35276d7c0a60f1c8ceb9714',\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safeSearch: true,\n    });\n\n    const PARAMS = `?${searchParams}`;\n    const url = BASE_URL + PARAMS;\n\n    return fetch(url)\n        .then(response => response.json())\n        .catch(error => {\n            toastError(`Error fetching images: ${error}`);\n            throw error;\n        });\n}\n\nexport { fetchImages, GALLERY_LINK };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages, GALLERY_LINK } from './pixabay-api';\n\nexport function createGallery({\n    largeImageURL,\n    tags,\n    webformatURL,\n    likes,\n    views,\n    comments,\n    downloads,\n}) {\n    return `\n    <a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n      <figure>\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n        <figcaption class=\"gallery__figcaption\">\n          <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n          <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n          <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n          <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n        </figcaption>\n      </figure>\n    </a>\n  `;\n}","// Імпортуємо модулі та стилі\nimport './js/pixabay-api.js';\nimport './js/render-functions.js';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Імпортуємо стилі та бібліотеку для індикації завантаження\nimport 'nprogress/nprogress.css';\nimport { fetchImages, GALLERY_LINK } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\n// Отримуємо посилання на контейнер галереї, форму пошуку та елементи інтерфейсу\nconst galleryContainer = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loaderContainer = document.querySelector('.loader');\nconst searchResultMessage = document.querySelector('.result-info');\n\n// Додаємо обробник події для форми пошуку\nsearchForm.addEventListener('submit', function (event) {\n    event.preventDefault();\n    const queryInput = event.target.elements.query.value.trim(); // Вилучаємо пробіли з початку і кінця рядка\n\n    // Додаємо відображення індикатора завантаження перед відправленням запиту\n    loaderContainer.style.display = 'block';\n\n    // Валідація мінімальної довжини пошукового запиту\n    if (queryInput.length < 3) {\n        // Використовуємо iziToast для відображення повідомлення про невалідний ввід\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query with at least 3 characters.',\n            position: 'topRight',\n        });\n        // Приховуємо індикатор завантаження у випадку невалідного вводу\n        loaderContainer.style.display = 'none';\n        return;\n    }\n\n    // Очищення HTML галереї перед новим пошуком\n    galleryContainer.innerHTML = '';\n    searchResultMessage.innerHTML = ''; // Очищення інформації про результат перед новим пошуком\n\n    // Ініціалізація SimpleLightbox тут, якщо потрібно, щоб гарантувати, що галерея буде готова до відображення\n    const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n\n    // Відправка запиту на сервер і обробка результату\n    fetchImages(queryInput)\n        .then(({ hits }) => {\n            // Після отримання результату приховуємо індикатор завантаження\n            loaderContainer.style.display = 'none';\n\n            if (hits.length > 0) {\n                // Виведення зображень в галерею\n                const galleryHTML = hits.map(createGallery).join('');\n                galleryContainer.innerHTML = galleryHTML;\n\n                // Виведення інформації про результат\n                searchResultMessage.innerHTML = `<p class=\"result-messages\">${hits.length} images found for \"${queryInput}\"</p>`;\n\n                // Оновлення SimpleLightbox\n                lightbox.refresh();\n            } else {\n                // Відображення повідомлення про відсутність результатів\n                searchResultMessage.innerHTML = '<p class=\"no-results-message\">No images found.</p>';\n            }\n\n            // Закриття інформації про результат через 5 секунд\n            setTimeout(() => {\n                searchResultMessage.innerHTML = '';\n            }, 5000);\n        })\n        .catch((error) => {\n            // Приховуємо індикатор завантаження у випадку помилки\n            loaderContainer.style.display = 'none';\n\n            console.error('Error fetching images:', error);\n\n            // Використання iziToast для відображення помилки користувачу\n            iziToast.error({\n                title: 'Error',\n                message: 'Error fetching images. Please try again.',\n                position: 'topRight',\n            });\n        })\n        .finally(() => {\n            // Приховання індикатора завантаження та очищення форми\n            searchForm.reset();\n        });\n});\n"],"names":["GALLERY_LINK","BASE_URL","fetchImages","q","PARAMS","url","response","error","createGallery","largeImageURL","tags","webformatURL","likes","views","comments","downloads","galleryContainer","searchForm","loaderContainer","searchResultMessage","event","queryInput","lightbox","SimpleLightbox","hits","galleryHTML"],"mappings":"svBAGA,MAAMA,EAAe,eACfC,EAAW,2BAEjB,SAASC,EAAYC,EAAG,CASpB,MAAMC,EAAS,IARM,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,CAE8B,GACzBE,EAAMJ,EAAWG,EAEvB,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAYA,EAAS,MAAM,EAChC,MAAMC,GAAS,CACZ,iBAAW,0BAA0BA,CAAK,EAAE,EACtCA,CAClB,CAAS,CACT,CCnBO,SAASC,EAAc,CAC1B,cAAAC,EACA,KAAAC,EACA,aAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,EAAG,CACC,MAAO;AAAA,eACIN,CAAa,YAAYT,CAAY;AAAA;AAAA,oBAEhCW,CAAY,UAAUD,CAAI;AAAA;AAAA,mEAEqBE,CAAK;AAAA,mEACLC,CAAK;AAAA,sEACFC,CAAQ;AAAA,uEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,GAKhF,CCdA,MAAMC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAkB,SAAS,cAAc,SAAS,EAClDC,EAAsB,SAAS,cAAc,cAAc,EAGjEF,EAAW,iBAAiB,SAAU,SAAUG,EAAO,CACnDA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,MAAM,MAAM,OAMrD,GAHAF,EAAgB,MAAM,QAAU,QAG5BG,EAAW,OAAS,EAAG,CAEvB,SAAS,QAAQ,CACb,MAAO,UACP,QAAS,0DACT,SAAU,UACtB,CAAS,EAEDH,EAAgB,MAAM,QAAU,OAChC,MACH,CAGDF,EAAiB,UAAY,GAC7BG,EAAoB,UAAY,GAGhC,MAAMG,EAAW,IAAIC,EAAe,IAAIvB,CAAY,EAAE,EAGtDE,EAAYmB,CAAU,EACjB,KAAK,CAAC,CAAE,KAAAG,KAAW,CAIhB,GAFAN,EAAgB,MAAM,QAAU,OAE5BM,EAAK,OAAS,EAAG,CAEjB,MAAMC,EAAcD,EAAK,IAAIhB,CAAa,EAAE,KAAK,EAAE,EACnDQ,EAAiB,UAAYS,EAG7BN,EAAoB,UAAY,8BAA8BK,EAAK,MAAM,sBAAsBH,CAAU,QAGzGC,EAAS,QAAO,CAChC,MAEgBH,EAAoB,UAAY,qDAIpC,WAAW,IAAM,CACbA,EAAoB,UAAY,EACnC,EAAE,GAAI,CACnB,CAAS,EACA,MAAOZ,GAAU,CAEdW,EAAgB,MAAM,QAAU,OAEhC,QAAQ,MAAM,yBAA0BX,CAAK,EAG7C,SAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UAC1B,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CAEXU,EAAW,MAAK,CAC5B,CAAS,CACT,CAAC"}