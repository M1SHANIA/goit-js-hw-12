{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '42175181-9f2e4ea0c75ffabf50c3ef9f9';\n\nexport async function searchImages(query, page = 1) {\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n    try {\n        const response = await axios.get(url);\n        return response.data.hits;\n    } catch (error) {\n        throw error;\n    }\n}\n","export function displayImages(galleryContainer, images) {\n  galleryContainer.innerHTML = '';\n  const fragment = document.createDocumentFragment();\n  images.forEach(image => {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n    const imageCard = document.createElement('div');\n    imageCard.classList.add('image-card');\n    imageCard.innerHTML = `\n            <a href=\"${largeImageURL}\" data-lightbox=\"image-set\" data-title=\"${tags}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\">\n                <div class=\"info\">Likes: ${likes}, Views: ${views}, Comments: ${comments}, Downloads: ${downloads}</div>\n            </a>\n        `;\n    fragment.appendChild(imageCard);\n  });\n  galleryContainer.appendChild(fragment);\n}\n\nexport function appendImages(galleryContainer, images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach(image => {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n    const imageCard = document.createElement('div');\n    imageCard.classList.add('image-card');\n    imageCard.innerHTML = `\n            <a href=\"${largeImageURL}\" data-lightbox=\"image-set\" data-title=\"${tags}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\">\n                <div class=\"info\">Likes: ${likes}, Views: ${views}, Comments: ${comments}, Downloads: ${downloads}</div>\n            </a>\n        `;\n    fragment.appendChild(imageCard);\n  });\n  galleryContainer.appendChild(fragment);\n}\n\nexport function initializeLightbox() {\n  new SimpleLightbox('.gallery a').refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport { displayImages, appendImages, initializeLightbox } from './js/render-functions.js';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderContainer = document.getElementById('loader');\nconst searchForm = document.getElementById('search-form');\nconst loadMoreBtn = document.getElementById('load-more');\nconst loadingIndicator = document.getElementById('loading-indicator');\n\nloadMoreBtn.style.display = 'none';\n\nconst apiKey = '42361434-dd35276d7c0a60f1c8ceb9714';\nlet currentPage = 1;\nlet currentQuery = '';\nlet currentImagesCount = 0;\nlet totalHits = 0;\n\nfunction toastSuccess(message) {\n    iziToast.success({\n        title: 'Success',\n        message: message,\n        position: 'topRight'\n    });\n}\n\nfunction toastError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight'\n    });\n}\n\nfunction toggleLoadMoreBtn(show) {\n    loadMoreBtn.style.display = show ? 'block' : 'none';\n}\n\nfunction toggleLoader(show) {\n    loaderContainer.style.display = show ? 'block' : 'none';\n    loadingIndicator.style.display = show ? 'block' : 'none';\n}\n\nasync function scrollToNextGroup() {\n    const cardHeight = galleryContainer.querySelector('.image-card').getBoundingClientRect().height;\n    window.scrollBy({\n        top: 2 * cardHeight,\n        left: 0,\n        behavior: 'smooth'\n    });\n}\n\nasync function performSearch(query, page) {\n    try {\n        toggleLoader(true);\n        const images = await searchImages(query, page);\n        if (images.length > 0) {\n            if (page === 1) {\n                displayImages(galleryContainer, images);\n            } else {\n                appendImages(galleryContainer, images);\n            }\n            toastSuccess(`Was found: ${images.length} images`);\n            initializeLightbox();\n            if (images.length < 15) {\n                toastError('We are sorry, but you have reached the end of search results.');\n                toggleLoadMoreBtn(false);\n            } else {\n                toggleLoadMoreBtn(true);\n            }\n            scrollToNextGroup();\n        } else {\n            galleryContainer.innerHTML = '';\n            toastError(`Sorry, there are no images matching your search query \"${query}\". Please try again!`);\n            toggleLoadMoreBtn(false);\n        }\n    } finally {\n        toggleLoader(false);\n    }\n}\n\nsearchForm.addEventListener('submit', async function (event) {\n    event.preventDefault();\n    toggleLoadMoreBtn(false);\n    const query = document.getElementById('query').value.trim();\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search query.' });\n        return;\n    }\n    currentQuery = query;\n    currentPage = 1;\n    await performSearch(query, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n    try {\n        toggleLoader(true);\n        currentPage++;\n        await performSearch(currentQuery, currentPage);\n    } catch (error) {\n        toastError('Failed to fetch additional images.');\n    } finally {\n        toggleLoader(false);\n    }\n});\n"],"names":["apiKey","searchImages","query","page","url","axios","error","displayImages","galleryContainer","images","fragment","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imageCard","appendImages","initializeLightbox","loaderContainer","searchForm","loadMoreBtn","loadingIndicator","currentPage","currentQuery","toastSuccess","message","iziToast","toastError","toggleLoadMoreBtn","show","toggleLoader","scrollToNextGroup","cardHeight","performSearch","event"],"mappings":"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"}